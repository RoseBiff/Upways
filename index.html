<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags - Les valeurs seront mises √† jour dynamiquement par JavaScript -->
    <title>Upways - Calculateur am√©lioration Metin2 | Optimiser vos upgrades</title>
    <meta name="description" content="Calculez la meilleure strat√©gie pour am√©liorer vos objets dans Metin2. √âconomisez temps et yang avec Upways, l'optimiseur d'am√©lioration gratuit.">
    <meta name="keywords" content="metin2, upways, am√©lioration, upgrade, calculateur, optimiseur">
    <link rel="canonical" href="https://metin2upways.com">
    
    <!-- Alternate languages -->
    <link rel="alternate" hreflang="fr" href="https://metin2upways.com/?lang=fr">
    <link rel="alternate" hreflang="en" href="https://metin2upways.com/?lang=en">
    <link rel="alternate" hreflang="ro" href="https://metin2upways.com/?lang=ro">
    <link rel="alternate" hreflang="tr" href="https://metin2upways.com/?lang=tr">
    <link rel="alternate" hreflang="de" href="https://metin2upways.com/?lang=de">
    <link rel="alternate" hreflang="x-default" href="https://metin2upways.com">
    
    <!-- favicon SVG (navigateurs modernes) -->
    <link rel="icon" href="/logo.svg" type="image/svg+xml" sizes="any">
    
    <!-- Chart.js pour les graphiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    
    <!-- html2canvas pour l'export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header √©l√©gant -->
    <header class="header">
        <div class="header-container">
            <div class="brand">
                <div class="logo-wrapper">
                <img src="logo.svg" alt="Upways" class="logo" onerror="this.style.display='none'">
                </div>
                <h1 class="brand-name">Upways</h1>
                <span class="brand-subtitle" data-i18n="brandSubtitle">Optimisateur d'am√©lioration Metin2</span>
            </div>
            
            <div class="header-controls">
                <!-- S√©lecteur de langue personnalis√© -->
                <div class="language-selector" id="languageSelector">
                    <button class="language-selector-button" id="languageSelectorButton">
                        <svg class="language-flag" viewBox="0 0 3 2" width="20" height="15">
                            <rect width="1" height="2" fill="#002654"/>
                            <rect x="1" width="1" height="2" fill="white"/>
                            <rect x="2" width="1" height="2" fill="#ED2939"/>
                        </svg>
                        <span class="language-name">Fran√ßais</span>
                        <svg class="language-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"/>
                        </svg>
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <div class="language-option" data-lang="fr">
                            <svg class="language-flag" viewBox="0 0 3 2" width="20" height="15">
                                <rect width="1" height="2" fill="#002654"/>
                                <rect x="1" width="1" height="2" fill="white"/>
                                <rect x="2" width="1" height="2" fill="#ED2939"/>
                            </svg>
                            <span>Fran√ßais</span>
                        </div>
                        <div class="language-option" data-lang="en">
                            <svg class="language-flag" viewBox="0 0 60 30" width="20" height="15">
                                <rect width="60" height="30" fill="#012169"/>
                                <path d="M0,0 L60,30 M60,0 L0,30" stroke="white" stroke-width="6"/>
                                <path d="M0,0 L60,30 M60,0 L0,30" stroke="#C8102E" stroke-width="4"/>
                                <path d="M30,0 v30 M0,15 h60" stroke="white" stroke-width="10"/>
                                <path d="M30,0 v30 M0,15 h60" stroke="#C8102E" stroke-width="6"/>
                            </svg>
                            <span>English</span>
                        </div>
                        <div class="language-option" data-lang="ro">
                            <svg class="language-flag" viewBox="0 0 3 2" width="20" height="15">
                                <rect width="1" height="2" fill="#002B7F"/>
                                <rect x="1" width="1" height="2" fill="#FCD116"/>
                                <rect x="2" width="1" height="2" fill="#CE1126"/>
                            </svg>
                            <span>Rom√¢nƒÉ</span>
                        </div>
                        <div class="language-option" data-lang="tr">
                            <svg class="language-flag" viewBox="0 0 360 240" width="20" height="15">
                                <rect width="360" height="240" fill="#E30A17"/>
                                <circle cx="120" cy="120" r="60" fill="white"/>
                                <circle cx="135" cy="120" r="48" fill="#E30A17"/>
                                <path d="M165,85 l15,35 -40,-12 h50 l-40,12 z" fill="white"/>
                            </svg>
                            <span>T√ºrk√ße</span>
                        </div>
                        <div class="language-option" data-lang="de">
                            <svg class="language-flag" viewBox="0 0 5 3" width="20" height="15">
                                <rect width="5" height="1" fill="black"/>
                                <rect y="1" width="5" height="1" fill="#DD0000"/>
                                <rect y="2" width="5" height="1" fill="#FFCE00"/>
                            </svg>
                            <span>Deutsch</span>
                        </div>
                    </div>
                </div>
                
                <button class="icon-btn" id="resetBtn" title="R√©initialiser" data-i18n-title="resetTitle">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                        <path d="M3 3v5h5"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!-- Navigation moderne -->
        <nav class="main-nav">
            <button class="nav-btn active" data-tab="config">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span data-i18n="configTab">Configuration</span>
            </button>
            <button class="nav-btn disabled" data-tab="analysis" id="analysisTabBtn">
                <span class="nav-icon">üìä</span>
                <span data-i18n="analysisTab">Analyse</span>
            </button>
        </nav>

        <!-- Onglet Configuration -->
        <section class="tab-content active" id="configTab">
            <div class="config-grid">
                <!-- S√©lection d'objet -->
                <div class="config-section">
                    <div class="section-card">
                        <h2 class="section-title" data-i18n="selectItem">S√©lection de l'objet</h2>
                        
                        <div class="search-container">
                            <input type="text" id="objectSearch" class="search-input" 
                                   placeholder="Rechercher un objet..." 
                                   data-i18n-placeholder="searchPlaceholder">
                            <div class="search-results" id="searchResults"></div>
                        </div>

                        <!-- Historique des objets r√©cents -->
                        <div class="recent-items" id="recentItems" style="display: none;">
                            <h3 class="subsection-title" data-i18n="recentItems">Objets r√©cents</h3>
                            <div class="recent-items-list" id="recentItemsList"></div>
                        </div>

                        <div class="selected-item" id="selectedItem" style="display: none;">
                            <img id="itemImage" class="item-image" src="" alt="">
                            <div class="item-info">
                                <h3 id="itemName" class="item-name"></h3>
                                <span class="item-badge" data-i18n="selected">S√©lectionn√©</span>
                            </div>
                        </div>

                        <!-- S√©lection des niveaux -->
                        <div class="level-selection" id="levelSelection">
                            <h3 class="subsection-title" data-i18n="upgradeLevels">Niveaux d'am√©lioration</h3>
                            <div class="level-selectors">
                                <div class="level-selector">
                                    <label data-i18n="fromLevel">De</label>
                                    <select id="startLevel" class="level-select">
                                        <option value="0">+0</option>
                                        <option value="1">+1</option>
                                        <option value="2">+2</option>
                                        <option value="3">+3</option>
                                        <option value="4">+4</option>
                                        <option value="5">+5</option>
                                        <option value="6">+6</option>
                                        <option value="7">+7</option>
                                        <option value="8">+8</option>
                                        <option value="9">+9</option>
                                        <option value="10">+10</option>
                                        <option value="11">+11</option>
                                        <option value="12">+12</option>
                                        <option value="13">+13</option>
                                        <option value="14">+14</option>
                                        <option value="15">+15</option>
                                        <option value="16">+16</option>
                                        <option value="17">+17</option>
                                        <option value="18">+18</option>
                                        <option value="19">+19</option>
                                        <option value="20">+20</option>
                                    </select>
                                </div>
                                <div class="level-arrow">‚Üí</div>
                                <div class="level-selector">
                                    <label data-i18n="toLevel">√Ä</label>
                                    <select id="endLevel" class="level-select">
                                        <option value="1">+1</option>
                                        <option value="2">+2</option>
                                        <option value="3">+3</option>
                                        <option value="4">+4</option>
                                        <option value="5">+5</option>
                                        <option value="6">+6</option>
                                        <option value="7">+7</option>
                                        <option value="8">+8</option>
                                        <option value="9" selected>+9</option>
                                        <option value="10">+10</option>
                                        <option value="11">+11</option>
                                        <option value="12">+12</option>
                                        <option value="13">+13</option>
                                        <option value="14">+14</option>
                                        <option value="15">+15</option>
                                        <option value="16">+16</option>
                                        <option value="17">+17</option>
                                        <option value="18">+18</option>
                                        <option value="19">+19</option>
                                        <option value="20">+20</option>
                                        <option value="21">+21</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configuration des prix -->
                <div class="config-section">
                    <div class="section-card">
                        <h2 class="section-title" data-i18n="priceConfig">Configuration des prix</h2>
                        
                        <!-- Prix des objets d'am√©lioration -->
                        <div class="price-section">
                            <h3 class="subsection-title" data-i18n="upgradeItems">Objets d'am√©lioration</h3>
                            <div class="price-grid" id="upgradeItemPrices">
                                <!-- G√©n√©r√© dynamiquement -->
                            </div>
                        </div>

                        <!-- Prix des mat√©riaux -->
                        <div class="price-section" id="materialSection" style="display: none;">
                            <h3 class="subsection-title" data-i18n="materials">Mat√©riaux</h3>
                            <div class="price-grid" id="materialPrices">
                                <!-- G√©n√©r√© dynamiquement -->
                            </div>
                        </div>
                        
                        <!-- Boutons d'import/export -->
                        <div class="config-import-export">
                            <button class="btn btn-secondary btn-small" id="exportConfigBtn">
                                <span class="btn-icon">üíæ</span>
                                <span data-i18n="exportConfig">Exporter config</span>
                            </button>
                            <button class="btn btn-secondary btn-small" id="importConfigBtn">
                                <span class="btn-icon">üìÅ</span>
                                <span data-i18n="importConfig">Importer config</span>
                            </button>
                            <input type="file" id="importConfigInput" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bouton d'analyse -->
            <div class="config-actions">
                <button class="btn btn-primary btn-large" id="analyzeBtn" disabled>
                    <span class="btn-icon">üöÄ</span>
                    <span data-i18n="runAnalysis">Lancer l'analyse</span>
                </button>
            </div>
        </section>

        <!-- Onglet Analyse -->
        <section class="tab-content" id="analysisTab">
            <!-- En-t√™te avec export -->
            <div class="analysis-header">
                <h2 class="analysis-title">
                    <span data-i18n="analysisResults">R√©sultats de l'analyse</span>
                    <span class="analysis-levels" id="analysisLevels"></span>
                </h2>
                <button class="export-btn" id="exportBtn" title="Exporter" data-i18n-title="exportTitle">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                </button>
            </div>

            <!-- R√©sum√© des strat√©gies -->
            <div class="strategies-summary">
                <div class="strategy-card optimal" data-strategy="optimal">
                    <div class="strategy-header">
                        <span class="strategy-icon">‚≠ê</span>
                        <h3 data-i18n="optimal">Optimale</h3>
                    </div>
                </div>

                <div class="strategy-card" data-strategy="custom">
                    <div class="strategy-header">
                        <span class="strategy-icon">üé®</span>
                        <h3 data-i18n="custom">Personnalis√©e</h3>
                    </div>
                </div>
            </div>

            <!-- D√©tails de la strat√©gie s√©lectionn√©e -->
            <div class="strategy-details" id="strategyDetails">
                <!-- Chemin d'am√©lioration -->
                <div class="detail-section">
                    <h3 class="detail-title" data-i18n="upgradePath">Chemin d'am√©lioration</h3>
                    <div id="upgradePath">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                </div>

                <!-- D√©tails en grille -->
                <div class="detail-grid">
                    <!-- Objets requis -->
                    <div class="detail-card">
                        <h4 data-i18n="requiredItems">Objets requis</h4>
                        <div class="items-list" id="requiredItems">
                            <!-- G√©n√©r√© dynamiquement -->
                        </div>
                    </div>

                    <!-- Mat√©riaux requis -->
                    <div class="detail-card">
                        <h4 data-i18n="requiredMaterials">Mat√©riaux requis</h4>
                        <div class="items-list" id="requiredMaterials">
                            <!-- G√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                </div>

                <!-- Graphique Tentatives vs Probabilit√© -->
                <div class="chart-section">
                    <h3 class="chart-title" data-i18n="chartTitle">Analyse de probabilit√© d'am√©lioration</h3>
                    <p class="chart-subtitle" data-i18n="chartSubtitle">
                        Evolution de la probabilit√© de succ√®s selon le nombre de tentatives
                    </p>
                    <div class="chart-container">
                        <canvas id="probabilityChart"></canvas>
                    </div>
                    <div class="chart-legend" id="chartLegend">
                        <!-- G√©n√©r√© dynamiquement -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer minimaliste -->
    <footer class="footer">
        <p>Made by RoseBiff ‚Ä¢ EasyL ‚Ä¢ ArcMeurtrier</p>
        <p><a href="https://metin2upways.com" target="_blank">metin2upways.com</a></p>
    </footer>

    <!-- Tooltip global -->
    <div class="tooltip" id="tooltip" style="display: none;">
        <div class="tooltip-content" id="tooltipContent"></div>
    </div>

    <!-- Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p data-i18n="calculating">Calcul en cours...</p>
    </div>

    <!-- Chargement du module principal avec type="module" -->
    <script type="module" src="js/app.js"></script>
</body>
</html>